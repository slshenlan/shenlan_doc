import{_ as s,o as n,c as a,S as l}from"./chunks/framework.3d018db5.js";const e="/shenlan_doc/assets/mysql_0.5cbeca69.png",p="/shenlan_doc/assets/mysql_1.51b50cca.png",o="/shenlan_doc/assets/mysql_2.828a662a.png",c="/shenlan_doc/assets/mysql_3.439df08e.png",t="/shenlan_doc/assets/mysql_4.58f44cb4.png",F=JSON.parse('{"title":"mysql","description":"","frontmatter":{},"headers":[],"relativePath":"docs/frontend/backend/linux/mysql.md","filePath":"docs/frontend/backend/linux/mysql.md","lastUpdated":1729236017000}'),r={name:"docs/frontend/backend/linux/mysql.md"},i=l('<h1 id="mysql" tabindex="-1">mysql <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;mysql&quot;">​</a></h1><h2 id="新建数据库" tabindex="-1">新建数据库 <a class="header-anchor" href="#新建数据库" aria-label="Permalink to &quot;新建数据库&quot;">​</a></h2><p><img src="'+e+'" alt=""></p><h2 id="异常问题操作" tabindex="-1">异常问题操作 <a class="header-anchor" href="#异常问题操作" aria-label="Permalink to &quot;异常问题操作&quot;">​</a></h2><ul><li>导出数据库 本地使用 mysqldump 异常</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 查看 绝对位置</span></span>\n<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">which</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysqldump</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># macbook -&gt; /usr/local/mysql/bin/mysqldump</span></span>\n<span class="line"><span style="color:#676E95;font-style:italic;"># linux   -&gt; /usr/bin/mysqldump (直接使用 mysqldump )</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> mysqldump </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> appConfig</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">isBuild </span><span style="color:#89DDFF;">?</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">mysqldump</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/usr/local/mysql/bin/mysqldump</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#C792EA;">const</span><span style="color:#A6ACCD;"> dump </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">spawn</span><span style="color:#A6ACCD;">(mysqldump</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> [</span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">-u</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbUser</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">`</span><span style="color:#C3E88D;">-p</span><span style="color:#89DDFF;">${</span><span style="color:#A6ACCD;">dbPass</span><span style="color:#89DDFF;">}`</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> dbName])</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="本地安装" tabindex="-1">本地安装 <a class="header-anchor" href="#本地安装" aria-label="Permalink to &quot;本地安装&quot;">​</a></h2><p><a href="https://downloads.mysql.com/archives/community/" target="_blank" rel="noreferrer">官方下载页面</a></p><p><img src="'+p+`" alt="预览"></p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># v 5.2.28</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 直接安装</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 最后一步保存临时密码</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="环境变量" tabindex="-1">环境变量 <a class="header-anchor" href="#环境变量" aria-label="Permalink to &quot;环境变量&quot;">​</a></h2><ul><li>第一步 ：在终端切换到根目录，编辑 ~/.bash_profile 和 ~/.zshrc 文件</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.bash_profile</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.zshrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 辅助：查看 mysql 本地路径</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ps</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ef</span><span style="color:#89DDFF;">|</span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 辅助：如果两个配置文件不存在，可以手动创建</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cd</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">touch</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.zshrc</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">vim</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.zshrc</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 辅助：如果不想走命令行的方式修改环境变量，也可以直接打开文件进行可视化修改，不支持 Linux 可视化</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">open</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.zshrc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ul><li>第二步 ： 进入 vim 编辑环境。 按下 i 进入 insert 模式 ，输入</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:/usr/local/mysql/bin</span></span>
<span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> PATH</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">$PATH</span><span style="color:#C3E88D;">:/usr/local/mysql/support-files</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>第三步 ：按下 esc 退出 insert 模式，输入 :wq 保存配置文件。</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">:wq</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>第四步 ：在终端界面下输入以下命令，让配置文件的修改生效，并查看环境变量是否设置成功</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.bash_profile</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">source</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.zshrc</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">echo</span><span style="color:#A6ACCD;"> $PATH</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>到这里环境变量就设置完成了，我们可以查看一下当前 mysql 的版本</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-V</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+o+`" alt="预览"></p><ul><li>MySQL 服务的启停和状态的查看</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 开启MySQL服务(需要输入电脑密码，不是数据库登录密码)</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 停止MySQL服务</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 重启MySQL服务</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">restart</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 查看MySQL服务状态</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">status</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="启动-mysql" tabindex="-1">启动 MySql <a class="header-anchor" href="#启动-mysql" aria-label="Permalink to &quot;启动 MySql&quot;">​</a></h2><ul><li>第一步 ：启动 mysql 服务</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sudo</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql.server</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">start</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>第二步 ：启动成功后，登录 mysql</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p><img src="`+c+`" alt="操作预览"></p><h2 id="初始化设置" tabindex="-1">初始化设置 <a class="header-anchor" href="#初始化设置" aria-label="Permalink to &quot;初始化设置&quot;">​</a></h2><ul><li>设置初始化密码(参考上图)</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysq</span><span style="color:#A6ACCD;">l</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">password</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&#39;123456&#39;</span><span style="color:#89DDFF;">);</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>回车，然后会提示设置成功。</p><ul><li>退出 sql 界面</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">exit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>附带 MySql 本地路径</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/mysql</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="编码格式" tabindex="-1">编码格式 <a class="header-anchor" href="#编码格式" aria-label="Permalink to &quot;编码格式&quot;">​</a></h2><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># 登录 - MySQL内部</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-u</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># MySQL内部 - 查看数据库编码格式 （推荐用这个，我用的这个！）</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">variables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">character%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><p>按照上面两步我们会输出下面 <img src="`+t+`" alt="操作预览"></p></li><li><p><code>character_set_database</code> 和 <code>character_set_server</code> 是 latin1 的字符集，也就是说 mysql 后续创建的表都是 latin1 字符集的，不是 utf8，会造成一些麻烦。</p></li><li><p>从以上信息可知数据库的编码为 <code>latin1</code>，需要修改为 <code>gbk</code> 或者是 <code>utf8</code> ；</p></li></ul><ol><li><code>character_set_client</code>：为客户端编码方式；</li><li><code>character_set_connection</code>：为建立连接使用的编码；</li><li><code>character_set_database</code>：数据库的编码；</li><li><code>character_set_results</code>：结果集的编码;</li><li><code>character_set_server</code>：数据库服务器的编码；</li></ol><p>只要保证以上五个采用的编码方式一样，就不会出现乱码问题。</p><ul><li><p>想要修改编码, 就需要修改 <code>mysql</code> 的配置文件 <code>my.cnf</code>，将需要修改的字段放到配置文件中配置即可</p></li><li><h3 id="重要问题-在修改-my-cnf-之前一定要关闭-mysql-进程-关闭-mysql-不然会遇到-mysql-的-sock-不能连接的问题" tabindex="-1">重要问题：在修改 my.cnf 之前一定要关闭 mysql 进程，关闭 mysql，不然会遇到 mysql 的 sock 不能连接的问题! <a class="header-anchor" href="#重要问题-在修改-my-cnf-之前一定要关闭-mysql-进程-关闭-mysql-不然会遇到-mysql-的-sock-不能连接的问题" aria-label="Permalink to &quot;重要问题：在修改 my.cnf 之前一定要关闭 mysql 进程，关闭 mysql，不然会遇到 mysql 的 sock 不能连接的问题!&quot;">​</a></h3></li><li><p>找到下面路径</p></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/mysql/support-files</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><ul><li>默认情况下安装 <code>Mysql</code> 后不会生成 <code>my.cnf</code> 配置文件，但是有些参数需要修改，比如：默认端口、最大连接数、大小写敏感等。 有些版本安装后可能会在 <code>support-file</code> 文件目录下生成 <code>my-default.cnf</code> 文件，如果有这个文件，可以自己复制该文件，并重命名为 <code>my.cnf</code>，如果没有就需要手动创建了，这边就是自己创建的，文件内容如下，供参考： <ul><li>简陋版配置文件（如果默认编码格式是 <code>utf8mb4</code>，没特殊情况可以不需要修改编码格式）：</li></ul></li></ul><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">[mysqld]</span></span>
<span class="line"><span style="color:#F07178;">default-storage-engine</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">INNODB</span></span>
<span class="line"><span style="color:#F07178;">character-set-server</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8</span></span>
<span class="line"><span style="color:#F07178;">lower_case_table_names</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 1</span></span>
<span class="line"><span style="color:#F07178;">socket</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> /tmp/mysql.sock</span></span>
<span class="line"><span style="color:#F07178;">port</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 3306</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">[client]</span></span>
<span class="line"><span style="color:#F07178;">default-character-set</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>字段参考配置文件</li></ul><div class="language-ini line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Example MySQL config file for small systems.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># This is for a system with little memory (&lt;= 64M) where MySQL is only used</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># from time to time and it&#39;s important that the mysqld daemon</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># doesn&#39;t use much resources.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># MySQL programs look for option files in a set of</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># locations which depend on the deployment platform.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># You can copy this option file to one of those</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># locations. For information about these locations, see:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># http://dev.mysql.com/doc/mysql/en/option-files.html</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># In this file, you can use all long options that a program supports.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># If you want to know which options a program supports, run the program</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># with the &quot;--help&quot; option.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># The following options will be passed to all MySQL clients</span></span>
<span class="line"><span style="color:#89DDFF;">[client]</span></span>
<span class="line"><span style="color:#F07178;">default-character-set</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#password = your_password</span></span>
<span class="line"><span style="color:#F07178;">port</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 3306</span></span>
<span class="line"><span style="color:#F07178;">socket</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> /tmp/mysql.sock</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Here follows entries for some specific programs</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># The MySQL server</span></span>
<span class="line"><span style="color:#89DDFF;">[mysqld]</span></span>
<span class="line"><span style="color:#F07178;">default-storage-engine</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">INNODB</span></span>
<span class="line"><span style="color:#F07178;">character-set-server</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8</span></span>
<span class="line"><span style="color:#F07178;">collation-server</span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;">utf8_general_ci</span></span>
<span class="line"><span style="color:#F07178;">port</span><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 3306</span></span>
<span class="line"><span style="color:#F07178;">socket</span><span style="color:#A6ACCD;">      </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> /tmp/mysql.sock</span></span>
<span class="line"><span style="color:#F07178;">lower_case_table_names</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 1    </span><span style="color:#676E95;font-style:italic;"># 是否对 sql 语句大小写敏感，1 表示不敏感，即不区分大小写</span></span>
<span class="line"><span style="color:#A6ACCD;">skip-external-locking</span></span>
<span class="line"><span style="color:#F07178;">key_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 16K</span></span>
<span class="line"><span style="color:#F07178;">max_allowed_packet</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 1M</span></span>
<span class="line"><span style="color:#F07178;">table_open_cache</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 4</span></span>
<span class="line"><span style="color:#F07178;">sort_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 64K</span></span>
<span class="line"><span style="color:#F07178;">read_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 256K</span></span>
<span class="line"><span style="color:#F07178;">read_rnd_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 256K</span></span>
<span class="line"><span style="color:#F07178;">net_buffer_length</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 2K</span></span>
<span class="line"><span style="color:#F07178;">thread_stack</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 256K   </span><span style="color:#676E95;font-style:italic;"># 该字段根据需要修改，默认是128K，我的是因为启动报了这个字段的错导致启动失败，所以我改成256K了</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Don&#39;t listen on a TCP/IP port at all. This can be a security enhancement,</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># if all processes that need to connect to mysqld run on the same host.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># All interaction with mysqld must be made via Unix sockets or named pipes.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Note that using this option without enabling named pipes on Windows</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># (using the &quot;enable-named-pipe&quot; option) will render mysqld useless!</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#skip-networking</span></span>
<span class="line"><span style="color:#F07178;">server-id</span><span style="color:#A6ACCD;">   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Uncomment the following if you want to log updates</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#log-bin=mysql-bin</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># binary logging format - mixed recommended</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#binlog_format=mixed</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Causes updates to non-transactional engines using statement format to be</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># written directly to binary log. Before using this option make sure that</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># there are no dependencies between transactional and non-transactional</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># tables such as in the statement INSERT INTO t_myisam SELECT * FROM</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># t_innodb; otherwise, slaves may diverge from the master.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#binlog_direct_non_transactional_updates=TRUE</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Uncomment the following if you are using InnoDB tables</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_data_home_dir = /usr/local/mysql/data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_data_file_path = ibdata1:10M:autoextend</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_log_group_home_dir = /usr/local/mysql/data</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># You can set .._buffer_pool_size up to 50 - 80 %</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># of RAM but beware of setting memory usage too high</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_buffer_pool_size = 16M</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_additional_mem_pool_size = 2M</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Set .._log_file_size to 25 % of buffer pool size</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_log_file_size = 5M</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_log_buffer_size = 8M</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_flush_log_at_trx_commit = 1</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#innodb_lock_wait_timeout = 50</span></span>
<span class="line"><span style="color:#89DDFF;">[mysqldump]</span></span>
<span class="line"><span style="color:#A6ACCD;">quick</span></span>
<span class="line"><span style="color:#F07178;">max_allowed_packet</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 16M</span></span>
<span class="line"><span style="color:#89DDFF;">[mysql]</span></span>
<span class="line"><span style="color:#A6ACCD;">no-auto-rehash</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Remove the next comment character if you are not familiar with SQL</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">#safe-updates</span></span>
<span class="line"><span style="color:#89DDFF;">[myisamchk]</span></span>
<span class="line"><span style="color:#F07178;">key_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 8M</span></span>
<span class="line"><span style="color:#F07178;">sort_buffer_size</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> 8M</span></span>
<span class="line"><span style="color:#89DDFF;">[mysqlhotcopy]</span></span>
<span class="line"><span style="color:#A6ACCD;">interactive-timeout</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br></div></div><ul><li>保存之后，需要找到<code>/etc</code> 路径, 将 <code>my.cnf</code> 复制贴贴到 <code>/etc</code> 这个目录下。可以直接通过快捷键 <code>command + shift + G</code> 前面文件</li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><p>为什么要放 <code>/etc</code> 下，可以通过命令行查看 <code>mysql</code> 加载的 <code>my.conf</code> 是从哪些目录进行加载的</p><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mysql</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--verbose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--help</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">|</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">grep</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my.cnf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># 输出（只要符合一个路径就行）</span></span>
<span class="line"><span style="color:#FFCB6B;">order</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">preference,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">my.cnf,</span><span style="color:#A6ACCD;"> $MYSQL_TCP_PORT</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#FFCB6B;">/etc/my.cnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/etc/mysql/my.cnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/usr/local/mysql/etc/my.cnf</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">~/.my.cnf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><ul><li><h3 id="记得重新执行一遍-环境变量配置步骤-mysql-找不到了" tabindex="-1">记得重新执行一遍 <code>环境变量配置步骤</code>(mysql 找不到了) <a class="header-anchor" href="#记得重新执行一遍-环境变量配置步骤-mysql-找不到了" aria-label="Permalink to &quot;记得重新执行一遍 \`环境变量配置步骤\`(mysql 找不到了)&quot;">​</a></h3></li><li><p>文件放好之后就重启 <code>mysql</code>，再次查看编码格式</p></li></ul><div class="language-shell line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># MySQL内部 - 查看数据库编码格式</span></span>
<span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">variables</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">like</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">character%</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div>`,56),y=[i];function m(b,C,u,d,D,A){return n(),a("div",null,y)}const f=s(r,[["render",m]]);export{F as __pageData,f as default};
